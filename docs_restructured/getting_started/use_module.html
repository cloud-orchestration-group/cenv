

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="generator" content="Docutils 0.17: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Using Zimagi Modules &mdash; Zimagi 0.5.1 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/override.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #021026" >
          
            
          <div class="logo"><span class="sr-only">Zimagi</span></div>

          

          

          
          <a href="../../readme.html" class="icon icon-home"><span class="name">Zimagi</span>
          
          </a>
          <span class="description">Distributed Data Processing Platform
            
              
              
              <span class="version">
                (0.5.1)
              </span>
              
            
          </span>


          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p><span class="caption-text">Links</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://zimagi.com">Zimagi Site</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/zimagi/zimagi/">GitHub Project</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../readme.html"><span>Zimagi</span> - <span class="description">Distributed Data Processing Platform</span></a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content style-external-links">
        
          















<div class="breadcrumbs" role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../readme.html">Docs</a> &raquo;</li>
        
      <li>Using Zimagi Modules</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/docs_restructured/getting_started/use_module.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <section id="using-zimagi-modules">
<h1>Using Zimagi Modules<a class="headerlink" href="#using-zimagi-modules" title="Permalink to this headline">¶</a></h1>
<p>Once you understand the basics of Zimagi’s structure and components, it is easy
to use a module developed by other users/developers.  The module we will clone
and install here is the one documented in <code class="docutils literal notranslate"><span class="pre">module-noaa-stations</span></code> (which is
discussed in <em>Creating a module</em>).  This module acquires and queries weather
station data provided by the National Oceanic and Atmospheric Administration.</p>
<section id="installing-zimagi">
<h2>Installing Zimagi<a class="headerlink" href="#installing-zimagi" title="Permalink to this headline">¶</a></h2>
<section id="cloning-the-zimagi-repo">
<h3>Cloning the Zimagi Repo<a class="headerlink" href="#cloning-the-zimagi-repo" title="Permalink to this headline">¶</a></h3>
<p>To begin, we install the main Zimagi system.  We do this by cloning the <a class="reference external" href="https://github.com/zimagi/zimagi.git">Zimagi
repo</a></p>
<p>Using the command line, navigate to a directory you wish to use, and then run
<code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">clone</span> <span class="pre">https://github.com/zimagi/zimagi.git</span></code>.</p>
</section>
<section id="configuring-the-environment">
<h3>Configuring the environment<a class="headerlink" href="#configuring-the-environment" title="Permalink to this headline">¶</a></h3>
<p>Change directory into the <code class="docutils literal notranslate"><span class="pre">zimagi</span></code> folder and then use Vagrant to
configure the development environment. Use <code class="docutils literal notranslate"><span class="pre">vagrant</span> <span class="pre">up</span></code> to initialize
the Vagrant instance and then use <code class="docutils literal notranslate"><span class="pre">vagrant</span> <span class="pre">ssh</span></code> to set up the
environment and ready Docker for use.</p>
<p><code class="docutils literal notranslate"><span class="pre">vagrant</span> <span class="pre">up</span></code></p>
<p>This will start the provisioning process. After provisioning has been
completed, all the necessary components will be installed, including the
core OS packages, core dependencies, development tools, Redis CLI, and
Docker. Finally, the application is built. We can then use
<code class="docutils literal notranslate"><span class="pre">vagrant</span> <span class="pre">ssh</span></code> to connect to the system.</p>
<p><code class="docutils literal notranslate"><span class="pre">vagrant</span> <span class="pre">ssh</span></code></p>
<p>Now that we’ve finished installing the dependencies and tools, we can
finish configuring the development environment for use. The first thing
we want to do is make sure all modules are updated and environment
defaults set. To do this, we’ll use <code class="docutils literal notranslate"><span class="pre">zimagi</span> <span class="pre">env</span> <span class="pre">get</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">zimagi</span> <span class="pre">env</span> <span class="pre">get</span></code></p>
<p>We can use the <code class="docutils literal notranslate"><span class="pre">docker-compose</span> <span class="pre">up</span></code> command to build the Docker
container, which will install everything using the Docker image. We’ll
use <code class="docutils literal notranslate"><span class="pre">-d</span></code> to daemonize the install process and let in run in the
background.</p>
<p><code class="docutils literal notranslate"><span class="pre">docker-compose</span> <span class="pre">up</span> <span class="pre">-d</span></code></p>
<p>You can check the status of the environment to see which containers are
currently installed and running. We want to be sure all Zimagi systems
components are running, including the entrypoints for PostGres and
Redis, zimagi-command, zimagi-scheduler, and zimagi-worker. The Docker
instance should contain the Zimagi core, which we can confirm by using
<code class="docutils literal notranslate"><span class="pre">zimagi</span> <span class="pre">env</span> <span class="pre">get</span></code> again.</p>
<p>After the setup process is complete, we need to set some environment
variables to ready Zimagi for use. First, we want to set the host for
the Zimagi environment.</p>
<p>We use the <code class="docutils literal notranslate"><span class="pre">host</span> <span class="pre">save</span></code> command to define a host. Here we’ll set the
host to the localhost. <code class="docutils literal notranslate"><span class="pre">zimagi</span> <span class="pre">host</span> <span class="pre">save</span> <span class="pre">host=localhost</span></code></p>
<p>Using <code class="docutils literal notranslate"><span class="pre">zimagi</span> <span class="pre">env</span> <span class="pre">get</span></code> will display that a host is now assigned to the
environment. By default, the active user of a Zimagi environment is
“admin”. You can see all current users and their status (active or
non-active) by using the <code class="docutils literal notranslate"><span class="pre">zimagi</span> <span class="pre">user</span> <span class="pre">list</span></code> command.</p>
<p><code class="docutils literal notranslate"><span class="pre">zimagi</span> <span class="pre">user</span> <span class="pre">list</span></code></p>
<p>You may wish to update the admin account’s attributes by using the
<code class="docutils literal notranslate"><span class="pre">user</span> <span class="pre">save</span></code> command and updating the user’s name, email, and password.
To do this, use the <code class="docutils literal notranslate"><span class="pre">user</span> <span class="pre">save</span></code> command along with the appropriate
field: <code class="docutils literal notranslate"><span class="pre">zimagi</span> <span class="pre">user</span> <span class="pre">save</span> <span class="pre">admin</span> <span class="pre">first_name=”First”</span></code></p>
<p>`<code class="docutils literal notranslate"><span class="pre">zimagi</span> <span class="pre">user</span> <span class="pre">save</span> <span class="pre">admin</span> <span class="pre">last_name=”Last&quot;</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">zimagi</span> <span class="pre">user</span> <span class="pre">save</span> <span class="pre">admin</span> <span class="pre">email=”[testemail&#64;address.com]&quot;</span></code></p>
<section id="installing-modules">
<h4>Installing Modules<a class="headerlink" href="#installing-modules" title="Permalink to this headline">¶</a></h4>
<p>Now that we have finished setting up the Zimagi environment we can install a module into the system.</p>
<p>We have to do several things when installing a module:</p>
<ul class="simple">
<li><p>Add the module to the Docker instance</p></li>
<li><p>Restart the Docker instance</p></li>
<li><p>Set module environment settings</p></li>
<li><p>Get most current data</p></li>
<li><p>Install any module requirements</p></li>
</ul>
<p>To begin with, we’ll add the module to the Docker instance. We do this by using the <cite>module add</cite> command, followed by the URL of the module that we want to add to the environment.</p>
<p><cite>zimagi module add https://github.com/zimagi/module-noaa-stations.git</cite></p>
<p>After adding the module to the Zimagi system, we need to reset the Docker instance.</p>
<p><cite>docker-compose restart</cite></p>
<p>Now we can check to see that the module install was successful by using the <a href="#id1"><span class="problematic" id="id2">`</span></a>zimagi module list`command. This will show a list of all modules.</p>
<p><cite>zimagi module list</cite></p>
<p>We want to make sure all modules share the same environment settings, and we can do this by using the <cite>zimagi module sync</cite> command.</p>
<p><cite>zimagi module sync</cite></p>
<p>We’ll use the <cite>zimagi env get</cite> command again to make sure that all modules contain the most current data from their sources and install any module requirements.</p>
<p>After installing and syncing the module, we can begin interacting with
the module.</p>
<p>We can learn which commands are available to us by using the <code class="docutils literal notranslate"><span class="pre">help</span></code>
command, allowing us to see which commands can be used for the installed
module.</p>
<p><code class="docutils literal notranslate"><span class="pre">zimagi</span> <span class="pre">--help</span></code></p>
<p>We’ll begin by importing some data to query. We’ll use the <code class="docutils literal notranslate"><span class="pre">import</span></code>
command to import some data, which in this instance is the data defined
by the <code class="docutils literal notranslate"><span class="pre">test</span></code> specification.</p>
<p><code class="docutils literal notranslate"><span class="pre">zimagi</span> <span class="pre">import</span> <span class="pre">test</span></code></p>
</section>
<section id="making-queries">
<h4>Making Queries<a class="headerlink" href="#making-queries" title="Permalink to this headline">¶</a></h4>
<p>Data points in this module are referred to as “observations”, as defined
in the specifications. Calling <code class="docutils literal notranslate"><span class="pre">help</span></code> on the module lets us see that
<code class="docutils literal notranslate"><span class="pre">observation</span></code> is a command we can use that lets us view and manage
station observations. We can use <code class="docutils literal notranslate"><span class="pre">observation</span> <span class="pre">list</span></code> to see all
observations in the imported data.</p>
<p><code class="docutils literal notranslate"><span class="pre">zimagi</span> <span class="pre">observation</span> <span class="pre">list</span></code></p>
<p>If we want to see just some of the fields associated with the
observations, we can pass in those fields as arguments. We can see which
fields are available to us by typing <code class="docutils literal notranslate"><span class="pre">--help</span></code> after
<code class="docutils literal notranslate"><span class="pre">observation</span> <span class="pre">list</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">zimagi</span> <span class="pre">observation</span> <span class="pre">list</span> <span class="pre">--help</span></code></p>
<p>We can also filter them with any filtering criteria we want. Let’s say
we want to focus on the <code class="docutils literal notranslate"><span class="pre">temp_attrs</span></code> field and limit it to just the
first 24 entries. We can do this by appending the <code class="docutils literal notranslate"><span class="pre">temp_attrs</span></code> field
followed by <code class="docutils literal notranslate"><span class="pre">.lt=24</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">zimagi</span> <span class="pre">observation</span> <span class="pre">list</span> <span class="pre">temp_attrs.lt=24</span></code></p>
<p>Now let’s say that we want to limit the returned fields to only <code class="docutils literal notranslate"><span class="pre">date</span></code>
and <code class="docutils literal notranslate"><span class="pre">temp</span></code>. We can accomplish this by adding the <code class="docutils literal notranslate"><span class="pre">--fields</span></code> argument
, followed by the fields we want to visualize.</p>
<p><code class="docutils literal notranslate"><span class="pre">zimagi</span> <span class="pre">observation</span> <span class="pre">list</span> <span class="pre">temp_attrs.lt=24</span> <span class="pre">--fields=date,temp</span></code></p>
<p>We can also use search for data points that match specific values. Let’s
say we want to get the records where the temperature is equal to 50.5.
All we have to do is append <code class="docutils literal notranslate"><span class="pre">temp=50.5</span></code> to the query.</p>
<p><code class="docutils literal notranslate"><span class="pre">zimagi</span> <span class="pre">observation</span> <span class="pre">list</span> <span class="pre">temp_attrs.lt=24</span> <span class="pre">temp=50.5</span></code></p>
</section>
</section>
</section>
</section>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Zimagi

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(false);
      });
  </script>

  
  
    
   

</body>
</html>